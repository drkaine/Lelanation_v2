const messages: Record<string, Record<string, string>> = {
  fr: {
    "tabs.discover": "Découvrir",
    "tabs.myBuilds": "Mes builds",
    "tabs.favorites": "Favoris",
    "tabs.settings": "Paramètres",
    "status.connected": "Client LoL connecté",
    "status.disconnected": "Client LoL non détecté",
    "subtitle": "Les mêmes builds que sur la page Builds, avec import local et favoris.",
    "loading": "Chargement des builds...",
    "noBuilds": "Aucun build disponible.",
    "noFavorites": "Aucun favori pour le moment.",
    "noImported": "Aucun build importé. Utilise un code de partage dans les paramètres pour importer tes builds du site.",
    "authorUnknown": "Auteur inconnu",
    "search": "Rechercher un build, champion, auteur...",
    "sort.label": "Tri",
    "sort.recent": "Plus récents",
    "sort.name": "Nom A-Z",
    "upToDate": "À jour",
    "clearFilters": "Effacer filtres",
    "import": "Importer",
    "favorite.add": "Ajouter aux favoris",
    "favorite.remove": "Retirer des favoris",
    "badge.personal": "Perso",
    "settings.language": "Langue",
    "settings.clientImport": "Import dans le client",
    "settings.importRunes": "Importer les runes",
    "settings.importItems": "Importer les items",
    "settings.importSpells": "Importer les sorts d'invocateur",
    "settings.matchSubmit": "Envoi du match",
    "settings.disableMatch": "Ne pas envoyer automatiquement mes matchs au site",
    "settings.autoOn": "Envoi auto actif si un nouveau match est détecté.",
    "settings.autoOff": "Envoi auto inactif.",
    "settings.shortcut": "Raccourci bureau",
    "settings.createShortcut": "Créer un raccourci sur le bureau",
    "settings.linkTitle": "Lier mes builds du site",
    "settings.linkHint": "Sur le site, dans \"Mes Builds\", clique sur \"Partager sur l'app\" pour obtenir un code.",
    "settings.linkPlaceholder": "Code (ex: ABC123)",
    "settings.linkImport": "Importer",
    "settings.linkLoading": "...",
    "settings.linkNotFound": "Code introuvable ou expiré.",
    "settings.linkServerError": "Erreur serveur.",
    "settings.linkNetworkError": "Impossible de contacter le serveur.",
    "settings.linkSuccess": "{count} build importé !",
    "settings.linkSuccessPlural": "{count} builds importés !",
    "settings.linkUpToDate": "Builds déjà à jour, aucun nouveau build.",
    "settings.clearImported": "Supprimer les builds importés ({count})",
    "match.autoSent": "Match envoyé automatiquement.",
    "match.alreadyKnown": "Match déjà connu.",
    "shortcut.created": "Raccourci créé.",
    "shortcut.error": "Impossible de créer le raccourci.",
  },
  en: {
    "tabs.discover": "Discover",
    "tabs.myBuilds": "My builds",
    "tabs.favorites": "Favorites",
    "tabs.settings": "Settings",
    "status.connected": "LoL Client connected",
    "status.disconnected": "LoL Client not detected",
    "subtitle": "Same builds as the Builds page, with local import and favorites.",
    "loading": "Loading builds...",
    "noBuilds": "No builds available.",
    "noFavorites": "No favorites yet.",
    "noImported": "No imported builds. Use a share code in Settings to import your builds from the website.",
    "authorUnknown": "Unknown author",
    "search": "Search build, champion, author...",
    "sort.label": "Sort",
    "sort.recent": "Most recent",
    "sort.name": "Name A-Z",
    "upToDate": "Up to date",
    "clearFilters": "Clear filters",
    "import": "Import",
    "favorite.add": "Add to favorites",
    "favorite.remove": "Remove from favorites",
    "badge.personal": "Personal",
    "settings.language": "Language",
    "settings.clientImport": "Client import",
    "settings.importRunes": "Import runes",
    "settings.importItems": "Import items",
    "settings.importSpells": "Import summoner spells",
    "settings.matchSubmit": "Match submission",
    "settings.disableMatch": "Don't automatically submit my matches to the website",
    "settings.autoOn": "Auto submit active when a new match is detected.",
    "settings.autoOff": "Auto submit inactive.",
    "settings.shortcut": "Desktop shortcut",
    "settings.createShortcut": "Create desktop shortcut",
    "settings.linkTitle": "Link my website builds",
    "settings.linkHint": "On the website, in \"My Builds\", click \"Share to app\" to get a code.",
    "settings.linkPlaceholder": "Code (e.g. ABC123)",
    "settings.linkImport": "Import",
    "settings.linkLoading": "...",
    "settings.linkNotFound": "Code not found or expired.",
    "settings.linkServerError": "Server error.",
    "settings.linkNetworkError": "Unable to reach server.",
    "settings.linkSuccess": "{count} build imported!",
    "settings.linkSuccessPlural": "{count} builds imported!",
    "settings.linkUpToDate": "Builds already up to date, no new builds.",
    "settings.clearImported": "Delete imported builds ({count})",
    "match.autoSent": "Match submitted automatically.",
    "match.alreadyKnown": "Match already known.",
    "shortcut.created": "Shortcut created.",
    "shortcut.error": "Unable to create shortcut.",
  },
};

/**
 * Translate a key. Pass `lang` explicitly so Vue can track the reactive dependency.
 * If called without `lang`, defaults to "fr".
 */
export function translate(lang: string, key: string, params?: Record<string, string | number>): string {
  const l = lang || "fr";
  let text = messages[l]?.[key] ?? messages.fr[key] ?? key;
  if (params) {
    for (const [k, v] of Object.entries(params)) {
      text = text.replace(`{${k}}`, String(v));
    }
  }
  return text;
}
